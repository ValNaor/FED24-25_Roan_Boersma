define(["classnames","react","rendering-engine-api","z-shop-event-bus"],(function(e,t,n,i){return(self.renderingEngineWebpackJsonp=self.renderingEngineWebpackJsonp||[]).push([[53588],{23838:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.def=void 0;var o=l(n(96708));t.def={queryId:o.id}},37250:function(){window.__RENDERING_ENGINE_TRANSLATION_KEYS__={...window.__RENDERING_ENGINE_TRANSLATION_KEYS__,short_card:["mobile.app.pdp.outof.a11y","catalog.flag.sponsored","product.flag.earlyaccess.plus","product.flag.priorityaccess.plus","product.flag.priorityaccess.loyalty_points"]}},13155:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return R}});var i=n(85959),a=n(32740),l=n(85695),o=n(32099),r=n(14936),s=n(84011),c=n(2673),d=n(52130),u=n(87548),f=n(10170),p=n(61617),m=n(5073),g=n(38856),y=n(14410),_=n(61706),v=n(44302),b=n(14070),h=n(30812),E=n(23838),I=n(89862),S=n(21775),k=n.n(S),A=n(15184),x=n(22837),N=n(66743),P=n(13185),w=n(71016);function D(e){let{isSmall:t,reason:n}=e;if(!n||!(e=>"SteeringReason"===e.__typename)(n))return null;const a=n.value.split(",");let l;for(const e of a)switch(e){case"PLUS_EARLY_ACCESS_CAMPAIGN":l=t?i.createElement(P.A,{logo:"Plus",size:"s"}):i.createElement(w.A,{logo:"Plus",size:"m",label:__("product.flag.earlyaccess.plus")});break;case"PLUS_PRIORITY_ACCESS_CAMPAIGN":l=t?i.createElement(P.A,{logo:"Plus",size:"s"}):i.createElement(w.A,{logo:"Plus",size:"m",label:__("product.flag.priorityaccess.plus")});break;case"LOYALTY_POINTS_PRIORITY_ACCESS_CAMPAIGN":l=t?i.createElement(P.A,{logo:"LoyaltyPoints",size:"s"}):i.createElement(w.A,{logo:"LoyaltyPoints",size:"m",label:__("product.flag.priorityaccess.loyalty_points")})}return l?i.createElement("div",{className:f.Cou},i.createElement(A.Sv,{colorScheme:x.z.monochromeDark},l)):null}var O=e=>{let{href:t,children:n,...a}=e;return t?i.createElement("a",{...a,href:t},n):i.createElement("button",a,n)};var L=n(95724),R=(0,a.tile)().withQueries((e=>({staticDependency:{gqltype:{}},data:{query:l,variables:{id:e.entity.id,skipSlides:!e.ruleData.linkToRelease}}}))).withTracking((e=>({def:E.def,context:{id:e.entity.id}}))).withProcessDependencies(((e,t)=>{var n,i,a,l,o;const{short:r}=e.data,s="string"==typeof e.staticDependency?e.staticDependency:null==(n=e.staticDependency)?void 0:n.collectionId,c="string"!=typeof e.staticDependency?null==(i=e.staticDependency)?void 0:i.carouselEntityIds:void 0;if(!r)return{action:"error",message:"Short is invalid or has missing data"};const d="string"!=typeof e.staticDependency&&(null==(a=e.staticDependency)?void 0:a.sponsoredVisibilityInfoId)||("AdvertisingVisibility"===(null==(l=r.visibility)?void 0:l.__typename)?null==(o=r.visibility.visibilityInfo)?void 0:o.id:null),u={position:c?c.findIndex((e=>e===r.id))+1:void 0,totalEntities:null==c?void 0:c.length};return{action:"render",tools:t.tools,data:{short:r,parentEntityId:s,a11yData:u,visibilityInfoId:d}}})).withRender((e=>{let{data:{parentEntityId:t,short:n,a11yData:l,visibilityInfoId:E},entity:S,ruleData:P,tools:w,context:R}=e;var C,T,z,G,V,Y,j,B,F,K,M;const[X,W]=i.useState(null),[q,J]=i.useState(Boolean(P.disableVideo)),[Q,U]=(0,v.W)({threshold:.5,triggerOnce:!1}),Z=null==(T=n.slideEntities)||null==(C=T.nodes)?void 0:C.find((e=>{var t;return!("SteeringReason"!==(null==(t=e.reason)?void 0:t.__typename)||!e.reason.value.includes("entry-point"))})),$=Z&&"Collection"===Z.__typename?null==(z=Z.cta)?void 0:z.uri:null,H=Boolean(P.linkToRelease),ee=!0===P.isLandscape,te=!0===P.useBiggerFont||ee,ne=!0===P.isBig,ie=S.hints.includes("is-medium"),ae=!(te||ee||ne||ie),le=!0===P.hideText,oe=(null==(G=n.portraitImage)?void 0:G.uri)||"",re=(null==(V=n.landscapeImage)?void 0:V.uri)||"",se=(null==(Y=n.portraitVideo)?void 0:Y.uri)||"",ce=(null==(j=n.landscapeVideo)?void 0:j.uri)||"",de={enableStandaloneInShadow:!!(null==P?void 0:P.enableStandaloneInShadowPrio2),enableStandaloneOnly:!!(null==P?void 0:P.enableStandaloneOnlyPrio2)};i.useEffect((()=>{const e=(0,b.I)();X&&(e?J(!0):U?X.play().catch((()=>J(!0))):X.pause())}),[X,U]);const ue={display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical",WebkitLineClamp:3,wordBreak:"break-word"},fe=e=>e?re||oe||"":oe||re||"",pe=(e=>e?ce||se:se||ce)(ee),me=!pe||q,ge=ee&&!me?null==(F=n.landscapeVideo)||null==(B=F.thumbnailImage)?void 0:B.uri:null==(M=n.portraitVideo)||null==(K=M.thumbnailImage)?void 0:K.uri,ye=pe.includes(".m3u8"),_e=(me?"static":"video")+(ne?" big":""),ve=(P.trackingLabelPrefix?String(P.trackingLabelPrefix):"unknown parent")+".teaser "+_e,be="teaser",he=("teaser."+ve).toLowerCase().replace(/ /g,"_");return i.createElement(a.ViewTracker,{onVisible:()=>{w.tracking.track({name:I.wc,context:{customLabel:ve,customActionSuffix:be,visibilityInfoId:E}},de),w.tracking.trackStandalone((e=>({name:"view_content",context:e}))({content_id:S.id,legacy_event_name:I.wc,event_trigger_name:he,...E?{visibility_info_id:E}:{}}),de)}},i.createElement(O,{style:{cursor:"pointer",borderRadius:"1rem"},className:h(o.Gm,r.Xv,m.cw,p.ZT,u.cky,(0,A.dl)(x.z.monochromeDark)),href:H&&$?$:void 0,onClick:()=>{w.tracking.track({name:I.bD,context:{customLabel:ve,customActionSuffix:be}},de),w.tracking.trackStandalone((e=>({name:"select_content",context:e}))({content_id:S.id,legacy_event_name:I.bD,event_trigger_name:he}),de),H||k().trigger("open-shorts-dialog",t,n.id)},"data-scroll-id":t+"__"+n.id,"aria-label":(null==l?void 0:l.position)&&(null==l?void 0:l.totalEntities)&&0!==(null==l?void 0:l.position)&&0!==(null==l?void 0:l.totalEntities)?n.title+" "+n.subtitle+". "+l.position+" "+__("mobile.app.pdp.outof.a11y")+" "+l.totalEntities:void 0},me?ee?i.createElement(i.Fragment,null,i.createElement(s.A,{className:m.sP,src:fe()}),i.createElement(s.A,{className:h(m.lX,m.lw),src:fe(!0)})):i.createElement(s.A,{src:fe()}):i.createElement(_.A,{playsinline:!0,protocol:ye?"hls":"http",preferredSubtitlesLocale:R.locale,poster:ge,ref:Q,src:pe,preload:"auto",width:0,height:0,className:r.Xv,muted:!0,autoplay:!1,loop:!0,controls:!1,onReady:e=>{W(e)},style:{objectFit:"cover"}}),le?null:i.createElement("div",{className:h(o.Gm,r.Xv,u.DYq,f.iZo,f.z$P,m.OL,g.Gs,g.vF,u.d7k,y.Jz,y.Ae),style:{background:"linear-gradient(360deg, rgba(0, 0, 0, 0.6) -1.72%, rgba(0, 0, 0, 0.288449) 28.4%, rgba(0, 0, 0, 0) 40.5%)"}},E?i.createElement("div",{className:h(f.Cou)},i.createElement(N.A,{onClick:e=>{(e=>{let{contentId:t,tracking:n,eventTriggerName:i}=e;const a={name:I.bD,context:{customActionSuffix:"sponsored info icon"}};n.track(a);const l={name:"select_content",context:{content_id:t,event_trigger_name:i,legacy_event_name:I.bD}};n.trackStandalone(l)})({contentId:n.id,tracking:w.tracking,eventTriggerName:"sponsored_info_icon"}),(0,L.D9)({visibilityInfoId:E}),e.preventDefault(),e.stopPropagation()},label:__("catalog.flag.sponsored")})):null,i.createElement(D,{isSmall:ae,reason:n.reason}),ne?i.createElement(i.Fragment,null,i.createElement("div",{className:h(m.lX,m.lw,m.K)},i.createElement(c.Ay,{preset:d.nx.h5,style:ue,tag:"h3"},n.title),i.createElement(c.Ay,{preset:d.nx.h5,font:d.KQ.serif,tag:"h3"},n.subtitle)),i.createElement("div",{className:h(m.sP,m.Ll)},i.createElement(c.Ay,{preset:d.nx.h3,style:ue},n.title),i.createElement(c.Ay,{preset:d.nx.h3,font:d.KQ.serif},n.subtitle))):i.createElement(i.Fragment,null,i.createElement(c.Ay,{style:ue,tag:"h3",preset:te?d.nx.h5:d.nx.h6},n.title),i.createElement(c.Ay,{className:h(m.lX,m.Ll),tag:"h3",preset:te?d.nx.h5:d.nx.h6,font:d.KQ.serif},n.subtitle)))))}))},85695:function(e){e.exports={id:"5e4fad8291331f750c7aca838f301cf1a6cf08f5e7c6cb3fd4a1a832cb4ec341"}},30812:function(t){"use strict";t.exports=e},85959:function(e){"use strict";e.exports=t},32740:function(e){"use strict";e.exports=n},21775:function(e){"use strict";e.exports=i},96708:function(e){"use strict";e.exports=JSON.parse('{"id":"fb768e9fdf03fc8bf592fc24519b22ed21cb966090ce50df7f2c93f683ad1e91"}')}},function(e){var t=function(t){return e(e.s=t)};return e.O(0,[29674],(function(){return t(37250),t(13155)})),e.O()}])}));
//# sourceMappingURL=https://zalando.de/dev/source-maps/short_card/index-75366f206d4e69591993.map