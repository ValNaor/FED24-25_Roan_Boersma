define(["classnames","react","react-dom","rendering-engine-api","z-shop-event-bus"],(function(e,t,n,i,o){return(self.renderingEngineWebpackJsonp=self.renderingEngineWebpackJsonp||[]).push([[47868],{35394:function(){window.__RENDERING_ENGINE_TRANSLATION_KEYS__={...window.__RENDERING_ENGINE_TRANSLATION_KEYS__,"entity_plus-exclusivity-notifications":["product.flag.earlyaccess.plus","product.flag.priorityaccess.loyalty_points","pdp.plus.earlyaccess.reminder.confirmation.headline","pdp.plus.earlyaccess.reminder.confirmation.subheadline","pdp.plus.earlyaccess.reminder.confirmation.body","pdp.plus.earlyaccess.reminder.confirmation.body.wishlist","pdp.plus.earlyaccess.reminder.error","max.order.limit.notification.pdp","max.customer.limit.notification.pdp","max.customer.limit.notification.wardrobe.web","loyalty_points.missions.success.pointscollected"]}},88827:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ne}});var i=n(32740),o=n(85959),r=n(17696),a=n(80622),c=n(52292),s=n(21775),l=n(28258),E=n(30812),u=n(51599),d=n(5073),R=n(38856),m=n(15184),S=n(22837),_=n(87548),A=n(36124),C=n(3906),y=n(10170),p=n(32099),T=n(22940),L=n(71016),I=n(9049),f=(0,o.createContext)({});var P=e=>{let{children:t,onClose:n,onLoad:i,label:r}=e;o.useEffect((()=>{i&&i()}),[]);const{loyaltyPointsProgram:a}=o.useContext(f);let c;var s;var l;["ACTIVE","ELIGIBLE"].includes(null!=(s=null==a?void 0:a.loyaltyStatus)?s:"")?c=(null==a||null==(l=a.tier)?void 0:l.name)?o.createElement(L.A,{logo:"LoyaltyPointsTile",label:r,logoLabel:a.tier.name,size:"m",icon:null==a?void 0:a.icon}):o.createElement(L.A,{logo:"LoyaltyPoints",label:r,size:"m"}):c=o.createElement(L.A,{logo:"Plus",label:r,size:"m"});return o.createElement("div",{className:E(_._Su,_.x6V,_.l5b,T.CY,d.OL,p.Gm)},o.createElement("div",{className:E(u.GUV,R.Vp,R.zb,y.QDS,y.goz),style:{maxWidth:460,maxHeight:233}},o.createElement("div",{className:_.cky},n&&o.createElement(C.A,{className:E(_.DYq,_.Er7,_.d7k),style:{cursor:"pointer"},onClick:n},o.createElement(A.A,{src:I.A})),o.createElement("div",{className:E(d.OL,R.Fn,y.uvl,(0,m.dl)(S.z.monochromeLight))},c),t)))};var D,N,v,b={earlyAccessText:()=>__("product.flag.earlyaccess.plus"),loyaltyPointsPriorityAccessText:()=>__("product.flag.priorityaccess.loyalty_points"),earlyAccessReminderSuccessHeadline:()=>__("pdp.plus.earlyaccess.reminder.confirmation.headline"),earlyAccessReminderSuccessSubheadline:()=>__("pdp.plus.earlyaccess.reminder.confirmation.subheadline"),earlyAccessReminderSuccessBody:()=>__("pdp.plus.earlyaccess.reminder.confirmation.body"),earlyAccessReminderAndLikeSuccessBody:()=>__("pdp.plus.earlyaccess.reminder.confirmation.body.wishlist"),earlyAccessReminderErrorText:()=>__("pdp.plus.earlyaccess.reminder.error"),purchaseRestrictionOnLoadText:()=>__("max.order.limit.notification.pdp"),purchaseRestrictionInPageText:()=>__("max.customer.limit.notification.pdp"),purchaseRestrictionWardrobeText:()=>__("max.customer.limit.notification.wardrobe.web")};!function(e){e.EARLY_ACCESS_REMINDER_AND_LIKE_SUCCESSS="EARLY_ACCESS_REMINDER_AND_LIKE_SUCCESSS",e.EARLY_ACCESS_REMINDER_SUCCESS="EARLY_ACCESS_REMINDER_SUCCESS",e.EARLY_ACCESS_REMINDER_ERROR="EARLY_ACCESS_REMINDER_ERROR",e.PURCHASE_RESTRICTION="PURCHASE_RESTRICTION",e.PURCHASE_LIMIT_REACHED="PURCHASE_LIMIT_REACHED",e.PURCHASE_LIMIT_REACHED_WARDROBE="PURCHASE_LIMIT_REACHED_WARDROBE",e.LOYALTY_MISSION_COMPLETED="LOYALTY_MISSION_COMPLETED"}(D||(D={})),function(e){e.DEFAULT="DEFAULT",e.CUSTOM="CUSTOM"}(N||(N={})),function(e){e.PDP="PDP",e.WARDROBE="WARDROBE"}(v||(v={}));var O=e=>{let{notifications:{defaultNotifications:t=[],customNotification:n},tracking:i,onClose:r,notificationPayload:a}=e;const[c,s]=o.useState(!1),{loyaltyPointsProgram:E}=o.useContext(f);var u;const d=["ACTIVE","ELIGIBLE"].includes(null!=(u=null==E?void 0:E.loyaltyStatus)?u:"");return o.useEffect((()=>{s(!0)}),[]),t.forEach((e=>{let{component:t,eventTracker:n}=e;(e=>{let{notificationPayload:t,component:n,eventTracker:i,tracking:o,isClientReady:r}=e;r&&(l.h.show(n(t)),o&&i&&i(o))})({notificationPayload:a,component:t,eventTracker:n,tracking:c?i:null,isClientReady:c})})),n?o.createElement(P,{label:d?b.loyaltyPointsPriorityAccessText():b.earlyAccessText(),onLoad:()=>n.eventTracker&&n.eventTracker(i),onClose:()=>r(N.CUSTOM)},n.component(a)):null};var U=n(2673),h=n(52130);var M=()=>o.createElement("div",{className:E(d.OL,R.vF,y.g5R)},o.createElement(U.Ay,{color:h.r7.primary,preset:h.nx.bodyBold},b.earlyAccessReminderSuccessHeadline()),o.createElement(U.Ay,{color:h.r7.primary,preset:h.nx.body},b.earlyAccessReminderSuccessSubheadline()));var k=()=>o.createElement(o.Fragment,null,o.createElement(M,null),o.createElement("div",null,o.createElement(U.Ay,{color:h.r7.primary,preset:h.nx.body},b.earlyAccessReminderSuccessBody(),o.createElement("span",null," "),b.earlyAccessReminderAndLikeSuccessBody()))),x=n(91936);var g=()=>o.createElement(x.E,{timeout:5e3,clickToHide:!1,action:{shouldHideOnClick:!1},preset:"error"},o.createElement(U.Ay,{color:h.r7.inverse,preset:h.nx.body},b.earlyAccessReminderErrorText()));var H=()=>o.createElement(o.Fragment,null,o.createElement(M,null),o.createElement("div",null,o.createElement(U.Ay,{color:h.r7.primary,preset:h.nx.body},b.earlyAccessReminderSuccessBody())));const Y=e=>{void 0===e&&(e=v.PDP);const{purchaseRestrictionInPageText:t,purchaseRestrictionWardrobeText:n}=b;return()=>o.createElement(x.E,{timeout:5e3,clickToHide:!1,action:{shouldHideOnClick:!1}},o.createElement(U.Ay,{color:h.r7.inverse,preset:h.nx.body},e==v.PDP?t():n()))},w=Y(v.PDP),B=Y(v.WARDROBE);var W=()=>o.createElement(x.E,{clickToHide:!1,action:{shouldHideOnClick:!1}},o.createElement(U.Ay,{color:h.r7.inverse,preset:h.nx.body},b.purchaseRestrictionOnLoadText())),F=n(13185);var z,V,G=e=>{let{amount:t}=e;return o.createElement(x.E,{timeout:5e3,clickToHide:!1,action:{shouldHideOnClick:!1}},o.createElement(m.Sv,{colorScheme:S.z.monochromeDark,className:E(d.OL,R.Fn)},o.createElement(F.A,{logo:"LoyaltyPointsShort",size:"s"}),o.createElement(U.Ay,{preset:h.nx.bodySmall,className:y.uB3},t+" "+__("loyalty_points.missions.success.pointscollected"))))};!function(e){e.PLUS_EARLY_ACCESS="early_access",e.PURCHASE_RESTRICTED="product availability restriction",e.PURCHASE_RESTRICTED_CART="cart",e.PURCHASE_RESTRICTED_LIMIT_REACHED="bought"}(z||(z={})),function(e){e.PDP="product detail page",e.ZET="zet",e.WARDROBE="wardrobe"}(V||(V={}));var Q=n(89862);const K=e=>{e.track({name:Q.wc,context:{customCategory:V.ZET,customLabel:"plus reminder set | "+z.PLUS_EARLY_ACCESS}})},$={[D.EARLY_ACCESS_REMINDER_AND_LIKE_SUCCESSS]:{component:k,eventTracker:K,kind:N.CUSTOM},[D.EARLY_ACCESS_REMINDER_SUCCESS]:{component:H,eventTracker:K,kind:N.CUSTOM},[D.EARLY_ACCESS_REMINDER_ERROR]:{component:g,kind:N.DEFAULT},[D.PURCHASE_RESTRICTION]:{component:W,eventTracker:e=>{e.track({name:Q.n6,context:{customCategory:V.PDP,customLabel:z.PURCHASE_RESTRICTED+" "+z.PURCHASE_RESTRICTED_CART}})},kind:N.DEFAULT},[D.PURCHASE_LIMIT_REACHED]:{component:w,eventTracker:e=>{e.track({name:Q.n6,context:{customCategory:V.PDP,customLabel:z.PURCHASE_RESTRICTED+" "+z.PURCHASE_RESTRICTED_LIMIT_REACHED}})},kind:N.DEFAULT},[D.PURCHASE_LIMIT_REACHED_WARDROBE]:{component:B,eventTracker:e=>{e.track({name:Q.wc,context:{customCategory:V.WARDROBE,customLabel:"liked items.add to cart.notification."+z.PURCHASE_RESTRICTED}})},kind:N.DEFAULT},[D.LOYALTY_MISSION_COMPLETED]:{component:e=>{let{amount:t}=e;return G({amount:t})},kind:N.DEFAULT}},q=e=>{let{earlyAccessReminderNotification:t,isInitialPageLoad:n,isMobile:i,isPurchaseQuantityRestricted:o,isPurchaseQuantityLimitReached:r,loyaltyMissionNotification:a}=e;const c=[];return o&&n&&c.push(D.PURCHASE_RESTRICTION),i&&r&&c.push(D.PURCHASE_LIMIT_REACHED),t&&c.push(t),a&&c.push(a),(e=>e.reduce(((e,t)=>{let{defaultNotifications:n,customNotification:i}=e;const o=$[t];return{customNotification:o.kind===N.CUSTOM?o:i,defaultNotifications:o.kind===N.DEFAULT?[...n,o]:n}}),{customNotification:null,defaultNotifications:[]}))(c)},J=e=>0===e,Z=(e,t)=>null!==e&&e>0&&t>=e,j=(e,t)=>{let{isMobile:n,purchaseQuantityLimit:i,tracking:o}=e,{earlyAccessReminderNotification:r,loyaltyMissionNotification:a,isInitialPageLoad:c,numPurchases:s}=t;return{notifications:q({earlyAccessReminderNotification:r,loyaltyMissionNotification:a,isInitialPageLoad:c,isMobile:n,isPurchaseQuantityRestricted:J(i),isPurchaseQuantityLimitReached:Z(i,s)}),tracking:o}};var X=()=>{const e=o.useContext(f),[t,n]=o.useState(!0),[i,r]=o.useState(0),[a,c]=o.useState(),[l,E]=o.useState(),[u,d]=o.useState(),R=()=>{c(D.EARLY_ACCESS_REMINDER_AND_LIKE_SUCCESSS)},m=()=>{c(D.EARLY_ACCESS_REMINDER_SUCCESS)},S=()=>{c(D.EARLY_ACCESS_REMINDER_ERROR)},_=e=>{E(D.LOYALTY_MISSION_COMPLETED),d(e)};o.useEffect((()=>{n(!1),s.on("PDP$ADD_TO_CART_SUCCESS",(()=>{r((e=>e+1))})),s.on("WARDROBE$PURCHASE_LIMIT_REACHED",(()=>{c(D.PURCHASE_LIMIT_REACHED_WARDROBE)})),s.on("PLUS$EARLY_ACCESS_REMINDER_AND_LIKE_SUCCESS_EVENT",R),s.on("PLUS$EARLY_ACCESS_REMINDER_SUCCESS_EVENT",m),s.on("PLUS$EARLY_ACCESS_REMINDER_ERROR_EVENT",S),s.on("PLUS$LOYALTY_MISSION_COMPLETED_SUCCESS_EVENT",_)}),[]);return o.createElement(O,{...j(e,{earlyAccessReminderNotification:a,loyaltyMissionNotification:l,isInitialPageLoad:t,numPurchases:i}),notificationPayload:{amount:u},onClose:e=>{e===N.CUSTOM&&c(void 0)}})};const ee=e=>({id:e.entity.id}),te=(0,c.C)((e=>e.children));var ne=(0,i.tile)().withQueries((e=>{var t;return(null==e||null==(t=e.ruleData)?void 0:t.showProductInfo)?{data:{query:a,variables:ee(e)}}:{data:{query:r}}})).withTracking((e=>({resolve:()=>({context:ee(e)})}))).withProcessDependencies((e=>({action:"render",data:e.data}))).withRender((e=>{var t,n;const{data:r,context:{deviceInfo:a},tools:{tracking:c}}=e;var s;const l={isMobile:a.isMobile,purchaseQuantityLimit:null!=(s=null==r||null==(n=r.product)||null==(t=n.purchaseRestriction)?void 0:t.quantityLimit)?s:null,tracking:c,loyaltyPointsProgram:r.loyaltyPointsProgram};return o.createElement(f.Provider,{value:l},o.createElement(te,{disableListeners:!0,serverMedia:a,isTouchOnServer:!a.isDesktop},o.createElement(i.ViewTracker,null,o.createElement(X,null))))}))},80622:function(e){e.exports={id:"5638c76143657c4e153410d9924a911ab6eb00481200db3a91f015842b2e16ad"}},17696:function(e){e.exports={id:"cf087712f8543b1bbf3dfcf616d65c64c894af7ba1d3c6d098a90ae603cb8ab8"}},30812:function(t){"use strict";t.exports=e},85959:function(e){"use strict";e.exports=t},48398:function(e){"use strict";e.exports=n},32740:function(e){"use strict";e.exports=i},21775:function(e){"use strict";e.exports=o}},function(e){var t=function(t){return e(e.s=t)};return e.O(0,[29674],(function(){return t(35394),t(88827)})),e.O()}])}));
//# sourceMappingURL=https://zalando.de/dev/source-maps/entity_plus-exclusivity-notifications/index-967281d59ae0e93bafa2.map