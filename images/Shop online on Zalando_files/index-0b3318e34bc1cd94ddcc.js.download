define(["classnames","react","rendering-engine-api","z-shop-event-bus"],(function(e,t,n,i){return(self.renderingEngineWebpackJsonp=self.renderingEngineWebpackJsonp||[]).push([[71190],{3171:function(e,t,n){"use strict";n.d(t,{H:function(){return i}});n(89862);function i(e,t,n){return"release slide.-."+(e&&t?"motion":t?"static":"video")+"."+n}},78293:function(e,t,n){"use strict";n.d(t,{m:function(){return o}});var i=n(85959),a=n(44302);function o(){const[e,t]=i.useState({}),[n,o]=i.useState(!1),[r,c]=(0,a.W)({threshold:.5,triggerOnce:!1});const l=e=>{if(!function(e){return"detail"in e}(e))throw new Error("not a custom event");o(e.detail)};i.useEffect((()=>(window.addEventListener("playerIsPaused",l),()=>{window.removeEventListener("playerIsPaused",l)})));return(0,i.useEffect)((()=>{t({transformOrigin:"50% 50%",animationName:c?"zoomAnimation":"",animationDuration:c?"5s":"",animationTimingFunction:c?"linear":"",animationPlayState:n?"paused":"running",keyFrameRules:"@keyframes zoomAnimation {\n                from {transform: scale(1);}\n                to {transform: scale(1.15);}\n            }"})}),[c,n]),{animationStyles:e,inViewRef:r}}},2600:function(){window.__RENDERING_ENGINE_TRANSLATION_KEYS__={...window.__RENDERING_ENGINE_TRANSLATION_KEYS__,"collection_short-slide-cover":["catalog.flag.sponsored","product.flag.earlyaccess.plus","product.flag.priorityaccess.plus","product.flag.priorityaccess.loyalty_points"]}},18268:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return P}});var i=n(85959),a=n(32740),o=n(72109),r=n(34412),c=n(2673),l=n(52130),s=n(30812),u=n(87548),m=n(10170),d=n(32099),g=n(14936),_=n(14982),p=n(61706),v=n(21267),y=n(22940),f=n(78293),k=n(3171),b=n(61617),S=n(89862);const h="release short",E=e=>{let{customLabel:t,tools:n,trackingOptions:i,uri:a}=e;let o=null;const r={customLabel:t,customCategory:h},c={event_trigger_name:a};return(e,t)=>{let a=null,l=null;const s=Math.round(e/t*100);var u,m;s>=25&&s<50?(a={name:S.Jh,context:r},l={name:"video_progress",context:{...c,legacy_event_name:S.Jh,video_percent:.25}}):s>=50&&s<75?(a={name:S.hr,context:r},l={name:"video_progress",context:{...c,legacy_event_name:S.hr,video_percent:.5}}):s>=75&&(a={name:S.iB,context:r},l={name:"video_progress",context:{...c,legacy_event_name:S.iB,video_percent:.75}}),!a||((u=a)===(m=o)||u&&m&&u.name===m.name)||(o=a,n.tracking.track(a,i),l&&n.tracking.trackStandalone(l,i))}};var I=n(15184),x=n(22837),N=n(71016);function w(e){let t,{hints:n}=e;if(!n.length)return null;for(const e of n)switch(e){case"PLUS_EARLY_ACCESS_CAMPAIGN":t=i.createElement(N.A,{logo:"Plus",size:"l",label:__("product.flag.earlyaccess.plus")});break;case"PLUS_PRIORITY_ACCESS_CAMPAIGN":t=i.createElement(N.A,{logo:"Plus",size:"l",label:__("product.flag.priorityaccess.plus")});break;case"LOYALTY_POINTS_PRIORITY_ACCESS_CAMPAIGN":t=i.createElement(N.A,{logo:"LoyaltyPoints",size:"l",label:__("product.flag.priorityaccess.loyalty_points")});break;default:continue}return t?i.createElement(I.Sv,{className:m.yON,colorScheme:x.z.monochromeDark},t):null}var A=n(66743),O=n(95724),L=n(21775),C=n.n(L);var P=(0,a.tile)().withQueries((e=>({data:{query:o,variables:{id:e.entity.id}}}))).withTracking((e=>({def:r.def,context:{id:e.entity.id}}))).withProcessDependencies(((e,t)=>{var n,i;const{collection:a}=e.data;return a?(null==(n=a.primaryImage)?void 0:n.uri)||(null==(i=a.primaryVideo)?void 0:i.uri)?{action:"render",data:{collection:a,isZoomInEnabled:void 0!==t.ruleData.isZoomInEnabled}}:{action:"error",message:"Collection has no media"}:{action:"error",message:"Invalid Cover Slide"}})).withRender((e=>{var t,n,o,r,I,x;const N=i.useRef(null),L=!a.SessionStorage.exists()||null===a.SessionStorage.get("mute-shorts")||"true"===a.SessionStorage.get("mute-shorts"),{collection:P,isZoomInEnabled:T}=e.data,R=null==(t=P.primaryVideo)?void 0:t.uri.includes(".m3u8"),D=(0,k.H)(T,!!(null==P||null==(n=P.primaryImage)?void 0:n.uri),P.id),{animationStyles:V,inViewRef:G}=(0,f.m)(),Y="AdvertisingVisibility"===(null==(o=P.visibility)?void 0:o.__typename)?null==(r=P.visibility.visibilityInfo)?void 0:r.id:void 0,z={enableStandaloneInShadow:!!e.ruleData.enableStandaloneInShadowPrio2,enableStandaloneOnly:!!e.ruleData.enableStandaloneOnlyPrio2},F="shorts-video-player-"+P.id.split(":").pop();return i.useEffect((()=>{(e=>{let{id:t,tracking:n,trackingOptions:i}=e;const a={name:"load_content",context:{legacy_event_name:S.Zz,content_id:t}};n.trackStandalone(a,i)})({id:P.id,tracking:e.tools.tracking,trackingOptions:z})}),[]),i.createElement(a.ViewTracker,{onVisible:()=>{(e=>{let{id:t,customLabel:n,tracking:i,trackingOptions:a,visibilityInfoId:o}=e;const r={name:S.wc,context:{customCategory:"release short",customLabel:n,visibilityInfoId:o}};i.track(r,a);const c={name:"view_content",context:{content_id:t,legacy_event_name:S.wc,event_trigger_name:n.replace(/ /g,"_").toLowerCase(),visibility_info_id:o}};i.trackStandalone(c,a)})({id:P.id,customLabel:D,tracking:e.tools.tracking,trackingOptions:z,visibilityInfoId:Y})}},i.createElement("div",{className:s(g.Xv,d.Gm,b.ZT),ref:G},(null==(I=P.primaryImage)?void 0:I.uri)&&!P.primaryVideo&&i.createElement(i.Fragment,null,i.createElement("style",{dangerouslySetInnerHTML:{__html:V.keyFrameRules}}),i.createElement(v.A,{src:P.primaryImage.uri,style:{objectFit:"cover",height:"100%",...T&&{transformOrigin:V.transformOrigin,animationName:V.animationName,animationDuration:V.animationDuration,animationTimingFunction:V.animationTimingFunction,animationPlayState:V.animationPlayState}}})),P.primaryVideo&&i.createElement(p.A,{playsinline:!0,id:F,protocol:R?"hls":"http",ref:N,preferredSubtitlesLocale:e.context.locale,src:P.primaryVideo.uri,preload:"auto",width:0,className:g.Xv,height:0,muted:L,autoplay:!1,controls:!1,onReady:()=>{var t,n;((e,t,n,i)=>{const a={name:S.BV,context:{uri:t,id:n,duration:Math.round(i)}};e.tracking.track(a)})(e.tools,(null==(t=P.primaryVideo)?void 0:t.uri)||"",P.id,(null==(n=P.primaryVideo)?void 0:n.duration)||0)},onTimeUpdate:E({customLabel:D,tools:e.tools,trackingOptions:z,uri:P.primaryVideo.uri}),onEnd:()=>{var t;return(e=>{let{customLabel:t,tools:n,trackingOptions:i,uri:a}=e;const o={name:S.yt,context:{customCategory:h,customLabel:t}};n.tracking.track(o,i);const r={name:"video_complete",context:{event_trigger_name:a,legacy_event_name:S.yt}};n.tracking.trackStandalone(r,i)})({customLabel:D,tools:e.tools,trackingOptions:z,uri:String(null==(t=P.primaryVideo)?void 0:t.uri)})},style:{objectFit:"cover"}}),i.createElement("div",{className:s(u.DYq,u.d7k,d.Gm,g.Xv),style:{background:"linear-gradient(#000000 1.29%, rgba(0, 0, 0, 0) 7.38%)"}}),i.createElement("div",{className:s(u.DYq,u.x6V,d.Gm,m.Bmg,m.ZIx,m.Mw$,m.SOP),style:{background:"linear-gradient(rgba(0, 0, 0, 0) 0%, #000000 100%)"}},Y?i.createElement("div",{className:s(m.Cou)},i.createElement(A.A,{className:s(u.cky,y.CY),onClick:t=>{C().trigger("pauseSlide"),(0,O.D9)({visibilityInfoId:Y}),(e=>{let{contentId:t,tracking:n,eventTriggerName:i}=e;const a={name:S.bD,context:{customActionSuffix:"sponsored info icon"}};n.track(a);const o={name:"select_content",context:{content_id:t,event_trigger_name:i,legacy_event_name:S.bD}};n.trackStandalone(o)})({contentId:P.id,tracking:e.tools.tracking,eventTriggerName:"sponsored_info_icon"}),t.stopPropagation()},label:__("catalog.flag.sponsored")})):null,i.createElement(w,{hints:e.entity.hints}),i.createElement(c.Ay,{font:l.KQ.sansSerif,preset:l.nx.h2},P.title),P.subtitle&&i.createElement(c.Ay,{font:l.KQ.serif,preset:l.nx.h2},P.subtitle),!!(null==(x=P.cta)?void 0:x.text)&&i.createElement("div",{className:m.Ol8},i.createElement(_.J,{target:"_blank",href:P.cta.uri,className:s(u.cky,d.Gm,y.CY),label:P.cta.text,onClick:()=>{var t;(null==(t=P.cta)?void 0:t.text)&&(e=>{let{id:t,ctaText:n,tracking:i,trackingOptions:a}=e;const o="release slide.-."+n,r={name:S.bD,context:{customCategory:"release short",customActionSuffix:"show",customLabel:o}};i.track(r,a);const c={name:"select_content",context:{content_id:t,legacy_event_name:S.bD,event_trigger_name:"show."+o.replace(/ /g,"_").toLowerCase()}};i.trackStandalone(c,a)})({id:P.id,ctaText:P.cta.text,tracking:e.tools.tracking,trackingOptions:z})}})))))}))},72109:function(e){e.exports={id:"34060902436bd16ecc85f374181e69f653153e43d09875d955949f9c43810ec2"}},30812:function(t){"use strict";t.exports=e},85959:function(e){"use strict";e.exports=t},32740:function(e){"use strict";e.exports=n},21775:function(e){"use strict";e.exports=i}},function(e){var t=function(t){return e(e.s=t)};return e.O(0,[29674],(function(){return t(2600),t(18268)})),e.O()}])}));
//# sourceMappingURL=https://zalando.de/dev/source-maps/collection_short-slide-cover/index-b3e395753c3b8071c0df.map