define(["classnames","react","rendering-engine-api","zalando-consent-api"],(function(e,t,n,a){return(self.renderingEngineWebpackJsonp=self.renderingEngineWebpackJsonp||[]).push([[31972],{80374:function(){window.__RENDERING_ENGINE_TRANSLATION_KEYS__={...window.__RENDERING_ENGINE_TRANSLATION_KEYS__,"app-download-banner":["main.close","download.app.banner.alt.cta","download.app.banner.cta"]}},81402:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return U}});var a=n(32740),r=n(85959),o=n(94179);const l="smart_app_download_banner",s="smart_app_download_banner",c="app_download_banner_exited",i=[1,1,1,1,1],u=[1,1,1,1,.5];function d(e){const t=e.get(l),n={view_count:((null==t?void 0:t.view_count)||0)+1};e.set(l,n,21)}const m={de_AT:430,fr_BE:321,nl_BE:320,de_CH:410,fr_CH:411,cz_CZ:420,de_DE:490,dk_DK:450,es_ES:340,en_IE:353,fi_FI:358,fr_FR:330,it_IT:390,nl_NL:310,no_NO:470,pl_PL:480,pt_PT:351,se_SE:460,en_GB:440,lt_LT:370,sk_SK:421,sl_SI:386,lv_LV:371,et_EE:372,hr_HR:385,hu_HU:360,ro_RO:400},p=["pl-PL","nl-NL","tr-TR","de-CH","fr-CH","it-CH","da-DK","de-DE","en-DE","no-NO","fi-FI","ru-RU","nl-BE","fr-BE","fr-FR","es-ES","it-IT","en-GB","sv-SE","de-AT","en-IE","cs-CZ","lt-LT","sk-SK","sl-SI","lv-LV","et-EE","hr-HR","hu-HU","ro-RO","pt-PT"];function _(e){const{id:t,language:n,domain:a}=function(e){const[t="",n=""]=e.split("-"),a=m[t+"_"+n];return a?{id:a,language:t,domain:n}:{id:490,language:"de",domain:"DE"}}(e),r="orf"+t+"__smartbanner.___.";return"adjust_t=kcry49g_t9wexgj&adjust_campaign="+(a.toLowerCase()+"_"+n+"_smartbanner_1")+"&adjust_adgroup="+r}async function f(e){let{locale:t,appStoreUrl:n}=e,r=!1;try{r=(await(0,a.promiseWithTimeout)((0,o.getConsent)("smart_app_download_banner"),100)).status}catch(e){}if(!r)return n;const l=_(t),s=function(){if("undefined"!=typeof window&&"undefined"!=typeof document){const e=Array.from(document.getElementsByTagName("meta")).find((e=>"al:ios:url"===e.getAttribute("property")));if(null==e?void 0:e.content)return e.content}return"zalando://ROOT"}(),c=encodeURIComponent(s);return"https://Hfe2.adj.st/"+s.replace("zalando://","")+(s.includes("?")?"&":"?")+l+"&adjust_deeplink="+c}var g=n(30812),E=n(31867);var b=e=>{let{appRatingArray:t}=e;const n=t.reduce(((e,t)=>e+t),0);return r.createElement("div",{"aria-label":"rating score "+n+" out of 5",role:"img"},t.map(((e,t)=>{let n="StarOutlined";return.5===e?n="StarHalf":e&&(n="StarFilled"),r.createElement(E.A,{key:t,fontSize:"custom",icon:n,size:10,style:{fontSize:"10px",marginRight:"2px"}})})))},w=n(51599),v=n(42768),S=n(5073),y=n(38856),h=n(9049),L=n(36124),k=n(87548),N=n(10170),C=n(22940),R=n(85202),x=n(3906),I=n(58777),A=n(2673),O=n(52130);var T=()=>r.createElement("svg",{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",style:{borderRadius:"6px"}},r.createElement("path",{fill:"#fff",d:"M0 0h36v36H0z"}),r.createElement("path",{fill:"#ff4c00",d:"M28.34 15.56c-1.59-2-3.82-3.91-6.72-5.65h-.02a24.08 24.08 0 0 0-8.15-3.11c-1.55-.26-2.3.04-2.63.23-.33.2-.96.7-1.52 2.2a25.6 25.6 0 0 0-1.44 8.76V18a25.5 25.5 0 0 0 1.44 8.77c.56 1.48 1.19 2 1.52 2.19.33.19 1.08.49 2.63.23a24 24 0 0 0 8.15-3.1h.02a24.75 24.75 0 0 0 6.72-5.66c1-1.24 1.1-2.05 1.1-2.45 0-.38-.1-1.2-1.1-2.43Z"})),B=n(62030);var F=e=>{const[t,n]=(0,r.useState)((0,a.isBrowser)()),o=(0,r.useRef)(0),[l]=(0,B.A)((()=>{const a=window.scrollY;t&&a>o.current&&n(!1),!t&&a<o.current&&a>e&&n(!0),o.current=a}),20);return(0,r.useEffect)((()=>((0,a.isBrowser)()&&window.addEventListener("scroll",l),()=>{(0,a.isBrowser)()&&window.removeEventListener("scroll",l)})),[l]),t};var P=e=>{let{onInstall:t,onClose:n,appPlatform:o}=e;const[l,s]=r.useState(!1),[c,d]=r.useState(!1);r.useEffect((()=>{d(!0)}),[]);const m=F(60),p="ios"===o?"(902k)":"(1.01M)",_="ios"===o?i:u;return l?null:r.createElement("div",{className:g(S.cw),style:{height:60}},c?r.createElement("div",{className:g(m?k._Su:k.cky,k.d7k,v.$3,w.F9z,C.y,S.OL,y.Fn,N.R2r,N.oJi,y.DP),style:{height:60}},r.createElement("div",{className:g(y.XU,S.OL,y.Fn)},r.createElement(x.A,{"aria-label":__("main.close"),label:__("main.close"),size:"small",preset:I.lH.transparent,onClick:()=>{(0,a.requestIdleCallback)((()=>{n(),s(!0)}))},type:"button",className:N.ZEI},r.createElement(L.A,{src:h.A,style:{width:12,height:12}})),r.createElement("div",{className:g(S.OL,y.Fn,N.R2r,N.Wbb,N.XSc)},r.createElement(T,null)),r.createElement("div",{className:g(S.OL,y.vF,N.uB3)},r.createElement(A.Ay,{preset:O.nx.bodySmallBold,"aria-label":"zalando"},"Zalando"),r.createElement("div",{className:g(S.OL,y.lE)},r.createElement(b,{appRatingArray:_}),r.createElement(A.Ay,{style:{padding:2},preset:O.nx.bodyExtraSmall},p)))),r.createElement("div",{className:g(S.OL,y.Fn)},r.createElement(R.j,{"aria-label":__("download.app.banner.alt.cta"),label:__("download.app.banner.cta"),onClick:t,style:{padding:8,minWidth:132}}))):null)},D=n(89862);const H="smartbanner";function z(e){return e.split(" ").join("_").toLowerCase()}const j=e=>{let{name:t,customCategory:n,customLabel:a,tools:r,customActionSuffix:o,rolloutFlags:l}=e;r.tracking.track({name:t,context:{customCategory:n,customLabel:a,customActionSuffix:o}},l)};var U=(0,a.tile)().withTracking((e=>({resolve:()=>({context:{id:e.entity.id}})}))).withRender((e=>{const{tools:t,context:n,ruleData:i}=e,u=t.cookies,m=n.deviceInfo,_=n.locale,g={enableStandaloneInShadow:Boolean(i.enableStandaloneInShadow),enableStandaloneOnly:Boolean(i.enableStandaloneOnly)};if(!m.appPlatform||function(e){return!!e&&!p.some((t=>t.toLowerCase()===e.toLowerCase()))}(_)||function(e){const t=e.get(c),{view_count:n=0}=e.get(l)||{};return t||n>=6}(u))return null;r.useEffect((()=>{!function(e){let t=!1;(0,o.getConsent)(s).then((n=>{n.status&&!t&&(d(e),t=!0),(0,o.subscribe)(s,(n=>{n.status&&!t&&(d(e),t=!0)}))})).catch((()=>{}))}(u)}),[]);return r.createElement(a.ViewTracker,{onVisible:()=>{((e,t,n)=>{const a="smartbanner-"+(t||"");j({name:D.wc,customCategory:H,customLabel:a,tools:e,rolloutFlags:n})})(t,m.appPlatform,g),t.tracking.trackStandalone(function(e){let{platform:t}=e;return{name:"view_content",context:{legacy_event_name:D.wc,event_trigger_name:z("smartbanner-"+(t||""))}}}({platform:m.appPlatform}),g)}},r.createElement(P,{onInstall:async()=>{var e;const n=await f({appStoreUrl:m.appStoreUrl,locale:_});null==(e=window.open(n,"_blank"))||e.focus(),((e,t,n)=>{const a="smartbanner-"+(t||"");j({name:D.bD,customCategory:H,customLabel:a,tools:e,rolloutFlags:n})})(t,m.appPlatform,g),t.tracking.trackStandalone(function(e){let{platform:t}=e;return{name:"select_content",context:{legacy_event_name:D.bD,event_trigger_name:z("smartbanner-"+(t||""))}}}({platform:m.appPlatform}),g)},onClose:()=>{u.set(c,!0,21),((e,t,n)=>{const a="smartbanner-"+(t||"");j({name:D.bD,customCategory:H,customLabel:a,tools:e,customActionSuffix:"close",rolloutFlags:n})})(t,m.appPlatform,g),t.tracking.trackStandalone(function(e){let{platform:t}=e;return{name:"select_content",context:{legacy_event_name:D.bD,event_trigger_name:z("close.smartbanner-"+(t||""))}}}({platform:m.appPlatform}),g)},appPlatform:m.appPlatform}))}))},30812:function(t){"use strict";t.exports=e},85959:function(e){"use strict";e.exports=t},32740:function(e){"use strict";e.exports=n},94179:function(e){"use strict";e.exports=a}},function(e){var t=function(t){return e(e.s=t)};return e.O(0,[29674],(function(){return t(80374),t(81402)})),e.O()}])}));
//# sourceMappingURL=https://zalando.de/dev/source-maps/app-download-banner/index-0f375ff934d118196698.map