define(["classnames","react","rendering-engine-api","z-shop-event-bus"],(function(e,t,n,a){return(self.renderingEngineWebpackJsonp=self.renderingEngineWebpackJsonp||[]).push([[63490],{39292:function(){window.__RENDERING_ENGINE_TRANSLATION_KEYS__={...window.__RENDERING_ENGINE_TRANSLATION_KEYS__,"information-banner":["header.usp.chat.title","header.usp.chat","header.usp.shipping.title","header.usp.shipping.AbTest","header.usp.retour.title","header.usp.retour","main.close"]}},31178:function(e,t,n){"use strict";n.r(t),n.d(t,{EVENT_BANNER_CANCEL_LINK:function(){return T},EVENT_BANNER_CLICK_LINK:function(){return I},default:function(){return D}});var a=n(32740),o=n(85959),r=n(21775),i=n(38930),s=n(30812),c=n(75839),l=n(10170),u=n(2673),d=n(52130),m=n(9049),p=n(36124),g=n(3906),h=n(58777),f=n(24832),_=n(38856),b=n(15184);const E="{#countdown}";function y(e){return e<10?"0"+e:String(e)}function N(e,t){const n=function(e,t){if(!t)return"";const n=Date.parse(t);if(isNaN(n))return"";const a=Math.max(n-e,0),o=Math.floor(a/1e3);return[Math.floor(o/3600),Math.floor(o/60)%60,o%60].map(y).join(":")}(t,e.publicationEnd);return e.text.replace(E,n)}var k=e=>{let{onClose:t,onLinkClick:n,onLoad:a,banner:r}=e;o.useEffect(a,[]);const[i,y]=o.useState(Date.now());o.useEffect((()=>{if(r.text.includes(E)){const e=setTimeout((()=>y(Date.now())),1e3);return()=>clearTimeout(e)}}));const k=r.text.includes(E)?N(r,i):r.text;return o.createElement("div",{"data-testid":"information-banner",className:b.yP,style:{background:r.backgroundColor,maxWidth:"100vw"}},o.createElement("div",{className:c.Vg8},o.createElement("div",{className:s(_.Fn,c.nME)},o.createElement("div",{className:s(f.Ig,c.nzo,c.Odg,c.FJc,c.YyF,l.LXt,l.vJI)},o.createElement(u.Ay,{tag:"p",preset:d.nx.bodyExtraSmall,font:d.KQ.sansSerif,dangerouslySetInnerHTML:{__html:k.replace("<a href",'<a style="text-decoration:none" href')},style:{WebkitFontSmoothing:"auto",MozOsxFontSmoothing:"auto"},onClick:e=>{"A"===e.target.tagName.toUpperCase()&&(e.preventDefault(),n())}})),r.isCloseable&&o.createElement("div",{style:{paddingRight:0},className:s(c.nzo,c.iKK,f.Lk)},o.createElement(g.A,{"aria-label":__("main.close"),preset:h.lH.transparent,label:__("main.close"),size:"small",onClick:t,type:"button"},o.createElement(p.A,{src:m.A,style:{width:16,height:16}}))))))},v=n(89862);function x(e){return{name:v.bD,context:e}}const S="header";function C(e){return t={customCategory:S,customLabel:"infobanner."+e},{name:v.n6,context:t};var t}function L(e){return e.split(" ").join("_").toLowerCase()}var w=n(5073),A=n(51599);var B=e=>{let{track:t}=e;return o.createElement("div",{"data-testid":"usp-bar",className:s(A.F9z,w.YW,w.Ll)},o.createElement("div",{className:c.Vg8},o.createElement("div",{className:s(c.nME,_.Fn),style:{height:"32px",lineHeight:"32px"}},o.createElement(u.Ay,{className:s(c.nzo,c.PwV,f.Ae,A.P6Z),preset:d.nx.bodyExtraSmallBold,color:d.r7.secondary,key:"chat",title:__("header.usp.chat.title"),dangerouslySetInnerHTML:{__html:__("header.usp.chat")},onClick:()=>t(x({customCategory:S,customLabel:"usp.support"})),style:{WebkitFontSmoothing:"auto",MozOsxFontSmoothing:"auto"}}),o.createElement(u.Ay,{className:s(c.nzo,c.PwV,f.Ig,A.P6Z),preset:d.nx.bodyExtraSmallBold,color:d.r7.secondary,key:"shipping",title:__("header.usp.shipping.title"),dangerouslySetInnerHTML:{__html:__("header.usp.shipping.AbTest")},onClick:()=>t(x({customCategory:S,customLabel:"usp.shipping"})),style:{WebkitFontSmoothing:"auto",MozOsxFontSmoothing:"auto"}}),o.createElement(u.Ay,{className:s(c.nzo,c.PwV,f.Lk,A.P6Z),preset:d.nx.bodyExtraSmallBold,color:d.r7.secondary,key:"retour",title:__("header.usp.retour.title"),dangerouslySetInnerHTML:{__html:__("header.usp.retour")},onClick:()=>t(x({customCategory:S,customLabel:"usp.returns"})),style:{WebkitFontSmoothing:"auto",MozOsxFontSmoothing:"auto"}}))))};const I="header:banner:click-link",T="header:banner:cancel-link";var D=(0,a.tile)().withQueries((e=>{let{context:t}=e;return{data:{query:i,variables:{url:t.navigation.url.href,navigationTargetGroup:t.intent.navigationTargetGroup},doNotBatch:!0}}})).withTracking((e=>({resolve:()=>({context:{id:e.entity.id}})}))).withProcessDependencies(((e,t)=>{let{tools:{cookies:n},ruleData:{hideUspBar:a}}=t;var o;const r=n.get("information_banner_closed")||{},i=null==e||null==(o=e.data)?void 0:o.informationBanner;return{action:"render",data:{informationBanner:i,closedBanners:r,isBannerClosed:!!i&&i.id in r,hideUspBar:a}}})).withRender((e=>{let{data:{informationBanner:t,isBannerClosed:n,closedBanners:i,hideUspBar:s},tools:{cookies:c,tracking:l},ruleData:u}=e;const[d,m]=o.useState(n),p=l.track;var g;const h=null!=(g=null==t?void 0:t.campaignName)?g:"",f={enableStandaloneInShadow:Boolean(u.enableStandaloneInShadow),enableStandaloneOnly:Boolean(u.enableStandaloneOnly)},_=Object.keys(i).filter((e=>{const t=i[e]||"";return new Date<new Date(t)})).reduce(((e,t)=>(e[t]=i[t]||"",e)),{});return t&&!d?o.createElement(k,{banner:t,onClose:()=>{(0,a.requestIdleCallback)((()=>{m(!0),(null==t?void 0:t.id)&&(i[t.id]=t.publicationEnd,c.set("information_banner_closed",{..._,[t.id]:t.publicationEnd},365),p(function(e){return x({customCategory:S,customActionSuffix:"close",customLabel:"infobanner."+e})}(h),f),l.trackStandalone(function(e){let{campaignName:t}=e;return{name:"select_content",context:{legacy_event_name:v.bD,event_trigger_name:L("close.infobanner."+t)}}}({campaignName:h}),f))}))},onLoad:()=>{p(C(h),f),l.trackStandalone(function(e){let{campaignName:t}=e;return{name:"load_content",context:{legacy_event_name:v.Zz,event_trigger_name:L("infobanner."+t)}}}({campaignName:h}),f)},onLinkClick:()=>{r.trigger(I,{banner:t}),p(function(e){return x({customCategory:S,customLabel:"infobanner."+e})}(h),{useBeacon:!0,...f}),l.trackStandalone(function(e){let{campaignName:t}=e;return{name:"select_content",context:{legacy_event_name:v.bD,event_trigger_name:L("click.infobanner."+t)}}}({campaignName:h}),f);const e=t.text.match(/<a\s+(?:[^>]*?\s+)?href='([^']*)'/),n=e&&e[1];if(n){let e=!1;r.on(T,(()=>{e=!0})),setTimeout((()=>{e||(window.location.href=n)}),200)}}}):s?null:o.createElement(B,{track:p})}))},38930:function(e){e.exports={id:"58e717ba99b1eba45844d73d4912779735e9107fa0fe96814bc67f234c330c2a"}},30812:function(t){"use strict";t.exports=e},85959:function(e){"use strict";e.exports=t},32740:function(e){"use strict";e.exports=n},21775:function(e){"use strict";e.exports=a}},function(e){var t=function(t){return e(e.s=t)};return e.O(0,[29674],(function(){return t(39292),t(31178)})),e.O()}])}));
//# sourceMappingURL=https://zalando.de/dev/source-maps/information-banner/index-cc37602f531d2e799db4.map