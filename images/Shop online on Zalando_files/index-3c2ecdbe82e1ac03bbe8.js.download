define(["classnames","react","rendering-engine-api"],(function(e,n,t){return(self.renderingEngineWebpackJsonp=self.renderingEngineWebpackJsonp||[]).push([[71735],{3171:function(e,n,t){"use strict";t.d(n,{H:function(){return i}});t(89862);function i(e,n,t){return"release slide.-."+(e&&n?"motion":n?"static":"video")+"."+t}},60563:function(e,n,t){"use strict";function i(){return"navigator"in t.g}t.d(n,{Z:function(){return u},d:function(){return d}});const a=e=>n=>{e.line&&(n.line=e.line),e.snapToLines&&(n.snapToLines=e.snapToLines),e.position&&(n.position=e.position),e.size&&(n.size=e.size),e.lineAlign&&(n.lineAlign=e.lineAlign),e.align&&(n.align=e.align)},o=e=>{const n=Object.entries(e).map((e=>{let[n,t]=e;const i=Object.entries(t).map((e=>{let[n,t]=e;return n+":"+t+";"})).join("");return e=>"video#"+e+"::"+n+" { "+i+" }"}));return e=>n.map((n=>n(e))).join("\n\n")},r=(e,n,t)=>{void 0===t&&(t=1);const i=e.text.split("\n").map((e=>e.length)).reduce(((e,n)=>Math.max(e,n)),0),a=parseFloat(getComputedStyle(document.documentElement).fontSize)*t/2*1.2*i/n.clientWidth,o=Math.min(90,100*a);e.size=o};const l={firefox:()=>i()&&navigator.userAgent.includes("Firefox/"),mobileSafari:()=>i()&&navigator.userAgent.includes("Safari/")&&!navigator.userAgent.includes("Chrome")&&(navigator.userAgent.includes("iPhone;")||navigator.userAgent.includes("iPad;")||navigator.userAgent.includes("iPod touch;")),safari:()=>i()&&navigator.userAgent.includes("Safari/")&&!navigator.userAgent.includes("Chrome"),chrome:()=>i()&&navigator.userAgent.includes("Chrome/")&&!navigator.userAgent.includes("; Android "),chromeOnAndroid:()=>i()&&navigator.userAgent.includes("Chrome/")&&navigator.userAgent.includes("Mobile Safari/")&&navigator.userAgent.includes("; Android ")},s=[{condition:l.firefox,cueSetup:{short:a({line:-4,snapToLines:!0,position:50,size:90,lineAlign:"start",align:"center"}),release:a({line:-3,snapToLines:!0,position:50,size:90,lineAlign:"start",align:"center"})},style:{short:o({cue:{"font-size":"1rem",color:"white","font-family":"HelveticaNow,Helvetica,sans-serif","background-color":"rgba(0,0,0,0.7)",outline:"rgba(0,0,0,0.7) solid 0.312rem"}}),release:o({cue:{color:"white","font-family":"HelveticaNow,Helvetica,sans-serif","background-color":"rgba(0,0,0,0.7)","font-size":"1.75rem"}})}},{condition:l.mobileSafari,cueSetup:{short:()=>{},release:()=>{}},style:{short:o({cue:{"background-color":"rgba(0,0,0,0.7)"},"-webkit-media-text-track-display":{transform:"translateY(-0.25em) !important",font:"1.5rem HelveticaNow,Helvetica,sans-serif !important","line-height":"1rem !important"}}),release:o({cue:{color:"white","font-family":"HelveticaNow,Helvetica,sans-serif","background-color":"rgba(0,0,0,0.7)","font-size":"1rem"}})}},{condition:l.safari,cueSetup:{short:()=>{},release:()=>{}},style:{short:o({cue:{"background-color":"rgba(0,0,0,0.7)"},"-webkit-media-text-track-display":{transform:"translateY(-0.25em) !important",font:"1.5rem HelveticaNow,Helvetica,sans-serif !important","line-height":"1rem !important"}}),release:o({cue:{color:"white","font-family":"HelveticaNow,Helvetica,sans-serif","background-color":"rgba(0,0,0,0.7)","font-size":"1.75rem"}})}},{condition:l.chrome,cueSetup:{short:(e,n)=>{e.line=-4,e.snapToLines=!0,e.position="auto",n&&r(e,n),e.lineAlign="start",e.align="center"},release:(e,n)=>{e.line=-2,e.snapToLines=!0,e.position="auto",n&&r(e,n,1.75),e.lineAlign="start",e.align="center"}},style:{short:o({cue:{"font-size":"1rem",color:"white","font-family":"HelveticaNow,Helvetica,sans-serif","background-color":"rgba(0,0,0,0.7)"}}),release:o({cue:{color:"white","font-family":"HelveticaNow,Helvetica,sans-serif","background-color":"rgba(0,0,0,0.7)"},"-webkit-media-text-track-container":{"font-size":"1.75rem !important"}})}},{condition:l.chromeOnAndroid,cueSetup:{short:(e,n)=>{e.line=-4,e.snapToLines=!0,e.position="auto",n&&r(e,n),e.lineAlign="start",e.align="center"},release:(e,n)=>{e.line=-3,e.snapToLines=!0,e.position="auto",n&&r(e,n,1.75),e.lineAlign="start",e.align="center"}},style:{short:o({cue:{"font-size":"1rem",color:"white","font-family":"HelveticaNow,Helvetica,sans-serif","background-color":"rgba(0,0,0,0.7)","line-height":"1.725rem"}}),release:o({cue:{color:"white","font-family":"HelveticaNow,Helvetica,sans-serif","background-color":"rgba(0,0,0,0.7)","line-height":"2.125rem"}})}}];function c(e,n){n&&n.cueSetup&&e.addEventListener("loadeddata",(()=>{const t=()=>{const t=Array.from(e.textTracks||[]).find((e=>"showing"===e.mode));null==t||t.addEventListener("cuechange",(()=>{Array.from((null==t?void 0:t.cues)||[]).forEach((t=>{if(n&&n.cueSetup){if(!function(e){return"line"in e}(t))return;n.cueSetup(t,e)}}))}))};t(),e.textTracks.addEventListener("change",(()=>{t()}))}))}const u=e=>{const n=s.find((e=>{let{condition:n}=e;return!0===n()}));var t;return n?{cueSetup:null!=(t=n.cueSetup[e])?t:null,style:n.style[e]}:void 0};function d(e,n){if("current"in e){if(!e.current)return;c(e.current,n)}else c(e,n)}},78293:function(e,n,t){"use strict";t.d(n,{m:function(){return o}});var i=t(85959),a=t(44302);function o(){const[e,n]=i.useState({}),[t,o]=i.useState(!1),[r,l]=(0,a.W)({threshold:.5,triggerOnce:!1});const s=e=>{if(!function(e){return"detail"in e}(e))throw new Error("not a custom event");o(e.detail)};i.useEffect((()=>(window.addEventListener("playerIsPaused",s),()=>{window.removeEventListener("playerIsPaused",s)})));return(0,i.useEffect)((()=>{n({transformOrigin:"50% 50%",animationName:l?"zoomAnimation":"",animationDuration:l?"5s":"",animationTimingFunction:l?"linear":"",animationPlayState:t?"paused":"running",keyFrameRules:"@keyframes zoomAnimation {\n                from {transform: scale(1);}\n                to {transform: scale(1.15);}\n            }"})}),[l,t]),{animationStyles:e,inViewRef:r}}},50886:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return S}});var i=t(85959),a=t(32740),o=t(29532),r=t(30812),l=t(14936),s=t(32099),c=t(61706),u=t(21267),d=t(87548),m=t(34412),g=t(89862);const f="release short",p=e=>{let{customLabel:n,tools:t,trackingOptions:i,uri:a}=e;let o=null;const r={customLabel:n,customCategory:f},l={event_trigger_name:a};return(e,n)=>{let a=null,s=null;const c=Math.round(e/n*100);var u,d;c>=25&&c<50?(a={name:g.Jh,context:r},s={name:"video_progress",context:{...l,legacy_event_name:g.Jh,video_percent:.25}}):c>=50&&c<75?(a={name:g.hr,context:r},s={name:"video_progress",context:{...l,legacy_event_name:g.hr,video_percent:.5}}):c>=75&&(a={name:g.iB,context:r},s={name:"video_progress",context:{...l,legacy_event_name:g.iB,video_percent:.75}}),!a||((u=a)===(d=o)||u&&d&&u.name===d.name)||(o=a,t.tracking.track(a,i),s&&t.tracking.trackStandalone(s,i))}};var v=t(78293),h=t(3171),y=t(61617),b=t(60563);var S=(0,a.tile)().withQueries((e=>({data:{query:o,variables:{id:e.entity.id}}}))).withTracking((e=>({def:m.def,context:{id:e.entity.id}}))).withProcessDependencies(((e,n)=>{var t,i;const{collection:a}=e.data;if(!a)return{action:"error",message:"Invalid Cover Slide"};if(!(null==(t=a.primaryImage)?void 0:t.uri)&&!(null==(i=a.primaryVideo)?void 0:i.uri))return{action:"error",message:"Collection has no media"};const o="boolean"==typeof n.ruleData.enableStandaloneInShadowPrio2&&n.ruleData.enableStandaloneInShadowPrio2,r="boolean"==typeof n.ruleData.enableStandaloneOnlyPrio2&&n.ruleData.enableStandaloneOnlyPrio2;return{action:"render",data:{collection:a,isZoomInEnabled:void 0!==n.ruleData.isZoomInEnabled,enableStandaloneInShadowPrio2:o,enableStandaloneOnlyPrio2:r}}})).withRender((e=>{var n,t,o;const{collection:m,isZoomInEnabled:S,enableStandaloneInShadowPrio2:w,enableStandaloneOnlyPrio2:k}=e.data,A=i.useRef(null),[_,x]=i.useState(null),E=!a.SessionStorage.exists()||null===a.SessionStorage.get("mute-shorts")||"true"===a.SessionStorage.get("mute-shorts"),L=null==(n=m.primaryVideo)?void 0:n.uri.includes(".m3u8"),H=(0,h.H)(S,!!(null==m||null==(t=m.primaryImage)?void 0:t.uri),m.id),{animationStyles:O,inViewRef:T}=(0,v.m)(),I=i.useMemo((()=>(0,b.Z)("short")),[]);i.useEffect((()=>{I&&(0,b.d)(A,I)}),[I,A]);const z={enableStandaloneOnly:k,enableStandaloneInShadow:w},N="shorts-video-player-"+m.id.split(":").pop();return i.useEffect((()=>{e.tools.tracking.trackStandalone({name:"load_content",context:{content_id:m.id,legacy_event_name:g.Zz}},{enableStandaloneInShadow:w,enableStandaloneOnly:k})}),[]),i.createElement(a.ViewTracker,{onVisible:()=>((e,n,t,i,a)=>{const o={enableStandaloneInShadow:n,enableStandaloneOnly:t},r={name:"view_content",context:{content_id:i,event_trigger_name:a.toLowerCase().replace(/ /g,"_"),legacy_event_name:g.wc}};e.trackStandalone(r,o),e.track({name:g.wc,context:{customCategory:"release short",customLabel:a}},o)})(e.tools.tracking,w,k,m.id,H)},i.createElement("div",{className:r(l.Xv,y.ZT),ref:T},(null==(o=m.primaryImage)?void 0:o.uri)&&!m.primaryVideo&&i.createElement(i.Fragment,null,i.createElement("style",{dangerouslySetInnerHTML:{__html:O.keyFrameRules}}),i.createElement(u.A,{src:m.primaryImage.uri,className:l.Xv,style:{objectFit:"cover",...S&&{transformOrigin:O.transformOrigin,animationName:O.animationName,animationDuration:O.animationDuration,animationTimingFunction:O.animationTimingFunction,animationPlayState:O.animationPlayState}}})),_&&i.createElement("style",null,_),m.primaryVideo&&i.createElement(c.A,{id:N,protocol:L?"hls":"http",ref:A,src:m.primaryVideo.uri,preload:"auto",preferredSubtitlesLocale:e.context.locale,width:0,className:l.Xv,height:0,muted:E,autoplay:!1,controls:!1,playsinline:!0,onReady:()=>{var n,t;I&&x(I.style(N)),((e,n,t,i)=>{const a={name:g.BV,context:{uri:n,id:t,duration:Math.round(i)}};e.tracking.track(a)})(e.tools,(null==(n=m.primaryVideo)?void 0:n.uri)||"",m.id,(null==(t=m.primaryVideo)?void 0:t.duration)||0)},onTimeUpdate:p({customLabel:H,tools:e.tools,trackingOptions:z,uri:m.primaryVideo.uri}),onEnd:()=>{var n;return(e=>{let{customLabel:n,tools:t,trackingOptions:i,uri:a}=e;const o={name:g.yt,context:{customCategory:f,customLabel:n}};t.tracking.track(o,i);const r={name:"video_complete",context:{event_trigger_name:a,legacy_event_name:g.yt}};t.tracking.trackStandalone(r,i)})({customLabel:H,tools:e.tools,trackingOptions:z,uri:String(null==(n=m.primaryVideo)?void 0:n.uri)})},style:{objectFit:"cover"}}),i.createElement("div",{className:r(d.DYq,d.d7k,s.Gm,l.Xv),style:{background:"linear-gradient(#000000 1.29%, rgba(0, 0, 0, 0) 7.38%, rgba(0, 0, 0, 0) 92%, #000000 100%)"}})))}))},29532:function(e){e.exports={id:"6f14e795634414a159fffe0ad01e58e5d4bb021e090a463e201fdb2fc3ce0c56"}},30812:function(n){"use strict";n.exports=e},85959:function(e){"use strict";e.exports=n},32740:function(e){"use strict";e.exports=t}},function(e){return e.O(0,[29674],(function(){return n=50886,e(e.s=n);var n})),e.O()}])}));
//# sourceMappingURL=https://zalando.de/dev/source-maps/collection_short-slide-media/index-2f69ae303586a12315db.map